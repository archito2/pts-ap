<core:FragmentDefinition 
    xmlns="sap.m" 
    xmlns:l="sap.ui.layout" 
    xmlns:f="sap.ui.layout.form" 
    xmlns:core="sap.ui.core" 
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <Table id="idItemsTable" inset="false" items="{/InvoiceItems}">
        <headerToolbar>
            <Toolbar>
                <ToolbarSpacer/>
                <Button icon ="{=${/UIModel/InvoiceItems/CreateMode}?'sap-icon://display':'sap-icon://edit'}" press="handleEditInvoiceItem"/>
                <Button icon="sap-icon://add" press="handleAddInvoiceItem"/>
                <Button enabled = "{configModel>/rowSelected}" icon="sap-icon://copy" press="handleInvoiceCopyItem"/>
                <Button enabled = "{configModel>/rowSelected}" icon="sap-icon://delete" press="handleInvoiceDeleteItem"/>
                <Button text="Apply Balance" icon="sap-icon://customize" press="handleInvoiceApplyBalances"/>
                <Button text="Distribute Balance" icon="sap-icon://customize" press="handleInvoiceDistributeBalances"/>
            </Toolbar>
        </headerToolbar>
        <columns>
            <!-- Company Code -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_BUKRST}!=='X'}">
                <Text text="Company Code"/>
            </Column>
            <!-- GL Account -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_GLACCT}!=='X'}">
                <Text text="G/L Acc"/>
            </Column>
            <!-- Cost Center -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_KOSTLT}!=='X'}">
                <Text text="Cost Center"/>
            </Column>
            <!-- Amount -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_NETWRT}!=='X'}">
                <Text text="Amount"/>
            </Column>
            <!-- Order -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_AUFNRT}!=='X'}">
                <Text text="Order"/>
            </Column>
            <!-- WBS Element -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_PROJT}!=='X'}">
                <Text text="WBS Element"/>
            </Column>
            <!-- Text -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_SGTXTT}!=='X'}">
                <Text text="Text"/>
            </Column>
            <!-- Txcod -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_TXCODT}!=='X'}">
                <Text text="Tax Code"/>
            </Column>
            <!-- Profit Center -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_PRCTRT}!=='X'}">
                <Text text="Profit Center"/>
            </Column>
            <!-- Sdate -->
            <Column visible = "{=${/WebStatus/WEB_HIDE_SDATET}!=='X'}">
                <Text text="Date"/>
            </Column>
        </columns>
        <items>
            <ColumnListItem>
                <cells>
                    <!-- Company Code -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Bukrs}"/>
                        <Input id="idInvoiceBukrsInput" visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Bukrs}" app:ovsService="CompanycodeListSet" showValueHelp="true" app:ovsIdField="CompCode" app:ovsDescField="CompName" app:ovsTitle="Select a Company Code" valueHelpRequest="handleValueHelp"/>
                    </VBox>
                    <!-- GL Account -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Glacc}"/>
                        <Input id="idGlaccInput" visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Glacc}" app:ovsReqdField="idInvoiceBukrsInput" app:ovsReqdFilter= "CompanyCode" app:ovsService="GLOVSSet" showValueHelp="true" app:ovsIdField="GLAccount" app:ovsDescField="GLDescript" app:ovsTitle="Select a G/L Account" valueHelpRequest="handleValueHelp"/>
                    </VBox>
                    <!-- Cost Center -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Kostl}"/>
                        <Input id="idKostlInput" visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Kostl}" app:ovsReqdField="idInvoiceBukrsInput" app:ovsReqdFilter= "CompanyCode" app:ovsService="CostCenterOVSSet" showValueHelp="true" app:ovsIdField="CostCenter" app:ovsDescField="CostCenterDesc" app:ovsTitle="Select a Cost Center" valueHelpRequest="handleValueHelp"/>
                    </VBox>
                    <!-- Amount -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Netwr}"/>
                        <Input visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Netwr}"/>
                    </VBox>
                    <!-- Order -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Aufnr}"/>
                        <Input id="idAufnrInput" visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Aufnr}" app:ovsReqdField="idBukrsInput" app:ovsReqdFilter= "CompanyCode" app:ovsService="OrderNumberOVSSet" showValueHelp="true" app:ovsIdField="OrderNumber" app:ovsDescField="Description" app:ovsTitle="Select a Company Code" valueHelpRequest="handleValueHelp"/>
                    </VBox>
                    <!-- WBS -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Projk}"/>
                        <Input id="idWbsInput" visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Projk}" app:ovsReqdField="idBukrsInput" app:ovsReqdFilter= "CompanyCode" app:ovsService="WBSOVSSet" showValueHelp="true" app:ovsIdField="WBSElement" app:ovsDescField="WBSElementDesc" app:ovsTitle="Select a WBS Element" valueHelpRequest="handleValueHelp"/>
                    </VBox>
                    <!-- Text -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Sgtxt}"/>
                        <Input visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Sgtxt}"/>
                    </VBox>
                    <!-- Txcod -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Mwskz}"/>
                        <Input id="idTxcodInput" visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Mwskz}" app:ovsReqdField="idBukrsInput" app:ovsReqdFilter= "CompanyCode" app:ovsService="TaxCodeOVSSet" showValueHelp="true" app:ovsIdField="TaxCode" app:ovsDescField="TaxCodeDesc" app:ovsTitle="Select a Tax Code" valueHelpRequest="handleValueHelp"/>
                    </VBox>
                    <!-- Profit Center -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Prctr}"/>
                        <Input id="idPrctrInput" visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Prctr}" app:ovsReqdField="idBukrsInput" app:ovsReqdFilter= "CompanyCode" app:ovsService="ProfitCenterOVSSet" showValueHelp="true" app:ovsIdField="ProfitCenter" app:ovsDescField="PRText" app:ovsTitle="Select a Profit Center" valueHelpRequest="handleValueHelp"/>
                    </VBox>
                    <!-- Sdate -->
                    <VBox>
                        <Text visible="{=!${/UIModel/InvoiceItems/CreateMode}}" text="{Sdate}"/>
                        <Input visible="{=${/UIModel/InvoiceItems/CreateMode}}" value="{Sdate}"/>
                    </VBox>
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</core:FragmentDefinition>